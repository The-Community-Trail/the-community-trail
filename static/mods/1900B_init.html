campaignTrail_temp.election_json = [
    {
        "model": "campaign_trail.election",
        "pk": 5,
        "fields": {
            "year": 1896,
            "summary": "<br><br>As incumbent President William Jennings Bryan seeks re-election, the Republicans rally behind Wisconsin Senator John Spooner in an attempt to retake the White House. <br><br>Bryan’s first term brought a mix of progressive achievements, including a 20:1 silver rate, a reduced tariff, and the regulation of railroads. His administration also secured numerous military successes abroad. With a vastly improved economy, Bryan starts with a strong foundation but faces skepticism from pro-business conservatives.</div>",
            "image_url": "https://pressbooks.pub/app/uploads/sites/2549/2019/02/WJB-Election-1896-Rocky-Mountain-News-Aug-15.jpg",
            "winning_electoral_vote_number": 224,
            "advisor_url": "https://i.imgur.com/Nql4UgM.png",
            "recommended_reading": "<h4 style=\"margin-top: 0.5em;\">General Resources</h4>  <a href=\"http://www.uselectionatlas.org/RESULTS/national.php?f=0&year=1896\" target=\"_blank\">Final 1896 Results</a> <br> <a href=\"http://projects.vassar.edu/1896/1896home.html\" target=\"_blank\">1896 Election -- Overview and Political Cartoons</a> <br>  <h4>By the Candidates</h4>  William Jennings Bryan - <a href=\"http://books.google.com/books/about/The_first_battle.html?id=9k4TAAAAYAAJ\" target=\"_blank\">The First Battle: A story of the campaign of 1896</a> <br>  William Jennings Bryan - <a href=\"http://www.youtube.com/watch?v=Ydrq2-j92cU\" target=\"_blank\">\"Cross of Gold\" speech</a> <br>  William McKinley - <a href=\"http://www.youtube.com/watch?v=m6ZUneyU7Vo\" target=\"_blank\">\"Front Porch\" speech</a> <br>  <h4>The Panic of 1893</h4> <a href=\"http://www.youtube.com/watch?v=Qu_b6N-G1Os\" target=\"_blank\">The Panic of 1893 with Lawrence Reed</a> (video) <br> <a href=\"http://eh.net/encyclopedia/article/Whitten.panic.1893\" target=\"_blank\">The Depression of 1893</a>  <h4>Misceallany</h4> <a href=\"http://www.oyez.org/cases/1851-1900/1895/1895_210/\" target=\"_blank\">Plessy v. Ferguson</a> <br> <a href=\"http://www.stfrancis.edu/content/ba/ghkickul/stuwebs/btopics/works/PullmanStrike.htm\" target=\"_blank\">Pullman Strike of 1894</a> <br> <a href=\"http://en.wikipedia.org/wiki/Wilson%E2%80%93Gorman_Tariff_Act\" target=\"_blank\">Wilson-Gorman Tariff</a> <br> <a href=\"http://prosperityuk.com/2001/01/a-wonderful-wizard-of-oz-a-monetary-reform-parable/\" target=\"_blank\">The Wonderful Wizard of Oz - A Monetary Reform Parable</a>",
            "has_visits": 0,
            "no_electoral_majority_image": "https://www.jetsimon.com/public/static/images/1896-no-majority.jpg",
            "creator": "Dan Bryan",
            "display_year": "1900B"
        }
    }
]

campaignTrail_temp.candidate_json = [
    {
        "model": "campaign_trail.candidate",
        "pk": 21,
        "fields": {
            "first_name": "William Jennings",
            "last_name": "Bryan",
            "election": 5,
            "party": "Democrat",
            "state": "Nebraska",
            "priority": 1,
            "description": "President Bryan is a populist Democrat known for his oratory and tireless campaigning. After securing bimetallism and implementing significant labor reforms, he campaigns on his record of delivering economic recovery and curbing corporate excess. Bryan appeals to farmers, workers, and progressives with his promises of continued regulation of powerful industries and his anti-imperialist message.",
            "color_hex": "#0000ff",
            "secondary_color_hex": "#FFA0A0",
            "is_active": 1,
            "image_url": "https://upload.wikimedia.org/wikipedia/commons/f/fa/WilliamJBryan1902.png",
            "electoral_victory_message": "<h3>Victory for the People!</h3><p>William Jennings Bryan’s vision for America triumphed as he secured a decisive reelection. His message of liberty without imperialism, economic reform, and trust-busting resonated with voters across the nation. With a renewed mandate, Bryan promises to continue fighting for the working class and usher in an era of fairness and justice. The people have spoken, and their voices have affirmed his leadership for a brighter future.</p>",
            "electoral_loss_message": "<h3>A Hard-Fought Defeat</h3><p>Despite a spirited campaign and passionate support from his base, William Jennings Bryan fell short in his bid for reelection. The Republican message of economic stability and cautious foreign policy swayed key voters, turning the tide against Bryan. Though defeated, he remains steadfast in his ideals and vows to continue advocating for the common people. His campaign has left an indelible mark on American politics, shaping debates for years to come.</p>",
            "no_electoral_majority_message": "<h3>The People Divided</h3><p>For the first time in decades, no candidate has secured a majority in the Electoral College, leaving the election unresolved. William Jennings Bryan, though receiving strong support, could not overcome a divided nation and regional splits. The House of Representatives will now decide the fate of the presidency. Bryan calls for patience, urging his supporters to trust the democratic process and remain hopeful for a favorable outcome.</p>",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 20,
        "fields": {
            "first_name": "John",
            "last_name": "Spooner",
            "election": 5,
            "party": "Republican",
            "state": "Wisconsin",
            "priority": 2,
            "description": "NOT CURRENTLY PLAYABLE, HOPEFULLY WILL BE ADDED SOON After a contentious presidential nomination, the Republicans have managed to quickly narrow the vice presidential candidates down.<br><br>Representative Dolliver is a member of the center-left wing of the Republican party.  Seen as acceptable from all wings of the party, Dolliver can appeal to progressives and citizens of the crucial swing state of Iowa.  Despite this, some at the Republican Convention have complained that he can be too progressive and does not provide geographical balance to the ticket.</div></div></div></div></div></div></div></div></div>",
            "color_hex": "#bf1d29",
            "secondary_color_hex": "#90C0FF",
            "is_active": 1,
            "image_url": "https://upload.wikimedia.org/wikipedia/commons/thumb/9/90/Portrait_of_John_Coit_Spooner.jpg/800px-Portrait_of_John_Coit_Spooner.jpg",
            "electoral_victory_message": "<h3>A New Era of Leadership</h3><p>John Spooner has emerged victorious, capturing the trust of a nation seeking stability and balance. His moderate approach to reform and dedication to constitutional principles resonated with voters eager for a steady hand. Spooner promises to lead with integrity, addressing the pressing issues of the day while uniting a country still grappling with economic and social challenges. A new chapter begins under his presidency.</p>",
            "electoral_loss_message": "<h3>A Campaign Cut Short</h3><p>John Spooner’s campaign for the presidency has ended in defeat, as voters ultimately chose William Jennings Bryan’s populist vision. Despite his loss, Spooner remains a respected statesman and a symbol of Republican moderation. He pledges to continue serving the nation, advocating for responsible governance and preserving constitutional values. The fight for the Republican Party’s future is far from over.</p>",
            "no_electoral_majority_message": "<h3>Uncertainty Looms</h3><p>In a stunning turn of events, the Electoral College has failed to produce a clear winner, thrusting the election into the hands of Congress. John Spooner, though a strong contender, was unable to secure the decisive support needed to claim victory. With the presidency hanging in the balance, Spooner appeals to lawmakers to prioritize unity and the national interest in their deliberations. The nation awaits the outcome with bated breath.</p>",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 22,
        "fields": {
            "first_name": "Southern",
            "last_name": "Bourbons",
            "election": 5,
            "party": "Bourbon South",
            "state": "Illinois",
            "priority": 3,
            "description": "<p>John Palmer is a splinter candidate put forward by Democrats who favor the gold standard. He has little chance of winning the general election, but a very good chance of pulling enough votes from Bryan to cause his defeat in certain states. This is the goal of conservative Democrats who simply wish to hold out until 1900 and nominate a better candidate than the radical Bryan.</p>",
            "color_hex": "#FFFF00",
            "secondary_color_hex": "#FFFFC0",
            "is_active": 0,
            "image_url": null,
            "electoral_victory_message": "Congratulations!",
            "electoral_loss_message": "Better luck next time!",
            "no_electoral_majority_message": "Congratulations!",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 2622,
        "fields": {
            "first_name": "Western",
            "last_name": "Populists",
            "election": 5,
            "party": "Populist West",
            "state": "Nevada",
            "priority": 20,
            "description": "n/a",
            "color_hex": "#00f01c",
            "secondary_color_hex": "#FFA0A0",
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/static/images/garret-hobart-1896.jpg",
            "electoral_victory_message": "n/a",
            "electoral_loss_message": "n/a",
            "no_electoral_majority_message": "n/a",
            "description_as_running_mate": "<p>Garret Hobart is currently President of the New Jersey Senate and a popular political figure in the Mid-Atlantic region. Before entering politics, he was a successful corporate lawyer.</p><p>Hobart is a strong party man, and the Republicans will certainly be drawing the battle lines clearly if they go with this choice.</p>",
            "candidate_score": 0,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 2001,
        "fields": {
            "first_name": "Jonathan",
            "last_name": "Dolliver",
            "election": 5,
            "party": "Republican",
            "state": "Iowa",
            "priority": 21,
            "description": "n/a",
            "color_hex": "#FF0000",
            "secondary_color_hex": "#FFA0A0",
            "is_active": 0,
            "image_url": "https://images.findagrave.com/photos/2003/261/7879129_1064000657.jpg",
            "electoral_victory_message": "n/a",
            "electoral_loss_message": "n/a",
            "no_electoral_majority_message": "n/a",
            "description_as_running_mate": "After a contentious presidential nomination, the Republicans have managed to quickly narrow the vice presidential candidates down.<br><br>Representative Dolliver is a member of the center-left wing of the Republican party.  Seen as acceptable from all wings of the party, Dolliver can appeal to progressives and citizens of the crucial swing state of Iowa.  Despite this, some at the Republican Convention have complained that he can be too progressive and does not provide geographical balance to the ticket.</div></div></div></div></div></div></div></div></div>",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 1004,
        "fields": {
            "first_name": "Adlai",
            "last_name": "Stevenson",
            "election": 5,
            "party": "Democrat",
            "state": "Illinois",
            "priority": 26,
            "description": "n/a",
            "color_hex": "#0000FF",
            "secondary_color_hex": "#90C0FF",
            "is_active": 0,
            "image_url": "https://upload.wikimedia.org/wikipedia/commons/thumb/5/51/Adlai_Stevenson_I_by_Saroney_c1892-crop.jpg/156px-Adlai_Stevenson_I_by_Saroney_c1892-crop.jpg",
            "electoral_victory_message": "n/a",
            "electoral_loss_message": "n/a",
            "no_electoral_majority_message": "n/a",
            "description_as_running_mate": "With the incumbent Vice President, Arthur Sewell, stepping down due to health considerations, the Democratic Convention is now in a heated battle between the Bourbon and Populist factions.  <br><br>Despite not being a Bourbon Democrat himself, Adlai Stevenson has become the face of the Bourbon faction for the Vice Presidential nomination.  Seen as non-partisan and experienced, the former Vice President under President Cleveland could be vital to bring Midwestern moderates and pro-Gold Democrats back to the fold.  Unfortunately, Stevenson is also tied to President Cleveland and his handling of the economic crisis of the early 1890s.<br></div></div></div></div></div></div></div></div></div></div>",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 1005,
        "fields": {
            "first_name": "Charles",
            "last_name": "Towne",
            "election": 5,
            "party": "Democrat",
            "state": "Minnesota",
            "priority": 28,
            "description": "n/a",
            "color_hex": "#0000FF",
            "secondary_color_hex": "#90C0FF",
            "is_active": 0,
            "image_url": "https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Charles_A._Towne_LCCN2014710866_%28cropped%29.jpg/220px-Charles_A._Towne_LCCN2014710866_%28cropped%29.jpg",
            "electoral_victory_message": "n/a",
            "electoral_loss_message": "n/a",
            "no_electoral_majority_message": "n/a",
            "description_as_running_mate": "With the incumbent Vice President, Arthur Sewell, stepping down due to health considerations, the Democratic Convention is now in a heated battle between the Bourbon and Populist factions.<br><br>Put forward as a progressive reformer, Representative Towne of Minnesota has become the leading vice presidential candidate from the Populist faction for the Vice Presidential nomination.  While increasing turnout from the Populists and Silver Republican, nominating Towne would leave conservatives across the Democratic Party wanting.</div></div></div></div></div></div></div></div></div></div>",
            "candidate_score": 0,
            "running_mate": true
        }
    }
]

campaignTrail_temp.running_mate_json = [
    {
        "model": "campaign_trail.running_mate",
        "pk": 83283,
        "fields": {
            "candidate": 20,
            "running_mate": 2001
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 96906,
        "fields": {
            "candidate": 21,
            "running_mate": 1004
        }
    }
]

campaignTrail_temp.credits = "u/GlobalMuffin, DecstarG for the Music Player"

campaignTrail_temp.global_parameter_json = [
    {
        "model": "campaign_trail.global_parameter",
        "pk": 1,
        "fields": {
            "vote_variable": 1.125,
            "max_swing": 0.12,
            "start_point": 0.94,
            "candidate_issue_weight": 10,
            "running_mate_issue_weight": 3,
            "issue_stance_1_max": -0.71,
            "issue_stance_2_max": -0.3,
            "issue_stance_3_max": -0.125,
            "issue_stance_4_max": 0.125,
            "issue_stance_5_max": 0.3,
            "issue_stance_6_max": 0.71,
            "global_variance": 0.01,
            "state_variance": 0.005,
            "question_count": 25,
            "default_map_color_hex": "#C9C9C9",
            "no_state_map_color_hex": "#999999"
        }
    }
]

campaignTrail_temp.opponents_default_json = [
    {
        "election": 5,
        "candidates": [
            21,
            20,
            22,
            2622
        ]
    }
]

campaignTrail_temp.opponents_weighted_json = [
    {
        "election": 5,
        "candidates": [
            21,
            20,
            22,
            2622
        ]
    }
]

campaignTrail_temp.temp_election_list = [
    {
        "id": 5,
        "year": 1896,
        "is_premium": 0,
        "display_year": "1900B"
    }
]

jet_data = {
    "headerColor": "#1c2833",
    "windowColor": "#99b898",
    "containerColor": "#334756",
    "innerWindowColor": "#99b898",
    "bannerImageUrl": "https://assets.editorial.aetnd.com/uploads/2009/12/william-jennings-bryan-democratic-presidential.jpg?width=768",
    "backgroundImageUrl": "https://i.imgur.com/h3aZJ54.jpeg",
    "endingTextColor": "#000000",
    "customQuote": "n/a",
    "gameTitle": "1900B: Bryan's Reelection Campaign"
}

//#startcode


nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#1c2833";

nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#99b898";

document.getElementsByClassName("game_header")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_title;

$("#game_window")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_window;

$(".container")[0].style.backgroundColor = "#334756";

document.getElementById("header").src = "https://assets.editorial.aetnd.com/uploads/2009/12/william-jennings-bryan-democratic-presidential.jpg?width=768";

document.body.background = "https://i.imgur.com/h3aZJ54.jpeg";

document.head.innerHTML += "<style>#results_container {color:#000000;} .inner_window_w_desc {background-color:#99b898!important;}</style>";

$("#music_player")[0].children[0].style.display="none"
$("#music_player")[0].children[1].style.display="none"

document.getElementById("modLoadReveal").style.display="none"
document.getElementById("modloaddiv").style.display="none"

musicBox = document.getElementById("music_player")
musicBox.style.display=""

var trackSel;
e = campaignTrail_temp
e.selectedSoundtrack = 0

toTime = (seconds) => {
  var date = new Date(null);
  date.setSeconds(seconds);
  return date.toISOString().substr(11, 8);
}

generateTime = () => {
    // Get the audio element
    var audio = document.getElementById("campaigntrailmusic");

    timeTracker = document.createElement("div");
    timeTracker.style = `
      text-align:left;
      border-style:solid;
      border-width:3px;
      height:150px;
      width:200px;
      background-color:#999999;
      float:right;
      padding: 10px;
    `
    $("#trackSelParent")[0].prepend(timeTracker);
    $("#trackSelParent")[0].prepend(document.createElement("br"));

    // Create a new element to display the current position of the audio
    var positionDisplay = document.createElement("gg");
    positionDisplay.id = "position-display";

    // Create a new slider element to change the time
    var timeSlider = document.createElement("input");
    timeSlider.type = "range";
    timeSlider.min = 0;
    timeSlider.max = 1;
    timeSlider.step = 0.001;
    timeSlider.value = 0;
    timeSlider.style.width = "200px";
    timeSlider.id = "time-slider";

    var pausePlay = document.createElement("button");
    pausePlay.id = "position-display";
    pausePlay.innerHTML = "<b>Pause</b>"
    pausePlay.style.width = "100%";


    pausePlay.addEventListener("click", event => {
      event.preventDefault();
      updatePositionDisplay();
      let audio = document.getElementById("campaigntrailmusic");
      if (audio.paused) {
        audio.play();
        event.target.innerHTML = "<b>Pause</b>";
        return;
      }
      audio.pause();
      event.target.innerHTML = "<b>Play</b>";
      return;
    })

    var volumeLabel = document.createElement("gg");
    volumeLabel.id = "volume-label";
    volumeLabel.innerHTML = "<br><b>Volume: </b>"

    var volumeSlider = document.createElement("input");
    volumeSlider.type = "range";
    volumeSlider.min = 0;
    volumeSlider.max = 1;
    volumeSlider.step = 0.001;
    volumeSlider.value = 0;
    volumeSlider.style.width = "200px";
    volumeSlider.id = "volume-slider";

    volumeSlider.value = audio.volume;

    timeTracker.appendChild(pausePlay);
    timeTracker.appendChild(document.createElement("br"));
    timeTracker.appendChild(document.createElement("br"));
    timeTracker.appendChild(positionDisplay);
    timeTracker.appendChild(timeSlider);
    timeTracker.appendChild(volumeLabel);
    timeTracker.appendChild(volumeSlider);

    updatePositionDisplay();

    //for (let i = 0; i < 10; i++)
    //timeTracker.append(document.createElement("br"));


    // Function to update the position display
    function updatePositionDisplay() {
      positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
      timeSlider.value = audio.duration ? audio.currentTime / audio.duration : 0;
    }

    // Function to change the time of the audio
    function changeTime() {
      positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
      audio.currentTime = timeSlider.value * audio.duration;
    }

    updateVolume = event => {
      audio.volume = event.target.value;
    }
    
    // Update the position display and slider every second
    setInterval(updatePositionDisplay, 1000);

    // Listen for changes to the time slider and change the time of the audio
    timeSlider.addEventListener("input", changeTime);
    volumeSlider.addEventListener("input", updateVolume)
}

function newMusicPlayer() {
  trackSel = document.createElement("div");
  trackSel.id = "trackSelParent"
  let z = `<br><br><br><br><br><br><br><br><br><br><div id='trackSel' style="text-align:left;border-style:solid;border-width:3px;overflow-y: scroll;overflow-x: hidden;height:200px; width:400px;background-color:#999999;float:right;">`
  z += `<b><select id='selectSoundtrack'><option value='`+soundtracks[e.selectedSoundtrack].name+`'>`+soundtracks[e.selectedSoundtrack].name+"</option>"
  for (i in soundtracks) {
    if (soundtracks[e.selectedSoundtrack] != soundtracks[i]) {
      z += `<option value='`+soundtracks[i].name+`'>`+soundtracks[i].name+`</option>`
    }
  }
  z += `</select></b><br><br>`
  // <label><input type="radio" name="option" value="option1">Option 1</label><br>
  for (i in soundtracks[e.selectedSoundtrack].tracklist) {
    let a = soundtracks[e.selectedSoundtrack].tracklist[i]
    let b = `<label><input class="trackSelector" type="radio" name="trackSelector" value="`+i+`">`+a.name+`</label><br>`
    z += b
  }
  z += "</div><br><br>"
  trackSel.innerHTML = z

  // select correct song

  musicBox.appendChild(trackSel);
  Array.from(document.getElementById("trackSel").children).filter(f=>{
    return f.tagName == "LABEL"
  }).map(f=>f.children[0])[0].checked = true

  // set soundtrack changer

  soundtrackSelector = document.getElementById("selectSoundtrack")
  soundtrackSelector.onchange = function() {
    for (i in soundtracks) {
      if (soundtracks[i].name == soundtrackSelector.value) {
        e.selectedSoundtrack = i
        break
      }
    }
    document.getElementById("trackSelParent").remove()
    newMusicPlayer()
  }

  var matches = document.querySelectorAll('.trackSelector');

  for (match in matches) {
    matches[match].onchange = function() {
      audio = $("#campaigntrailmusic")[0];
      audio.src = soundtracks[e.selectedSoundtrack].tracklist[this.value].url
      audio.currentTime = 0
    }
  }

  musicBox.children[2].loop = false
  musicBox.children[2].src = soundtracks[e.selectedSoundtrack].tracklist[0].url

  musicBox.children[2].onended = function() {
    console.log("next track")
    let selected = Number(document.querySelector('input[name="trackSelector"]:checked').value);
    let newSel = clamp(selected+1, soundtracks[e.selectedSoundtrack].tracklist.length-1, 0)
    let buttons = Array.from(document.getElementById("trackSel").children).filter(f=>{
      return f.tagName == "LABEL"
    }).map(f=>f.children[0])
    //let selectedIndex = buttons.map(f=>f.children[0]).map(f=>f.checked)
    buttons[newSel].click()
  }

  for (w = 0; w < 7; w++) {
    document.getElementById("trackSelParent").appendChild(document.createElement("br"))
  }
  
  generateTime();
}

clamp = function(a, max, min, overflow=true) {
  if (overflow) {
    return a > max ? min : a < min ? max : a;
  }
  return a > max ? max : a < min ? min : a;
}


// Track list

var soundtracks = {
  0: {
    name: "1900B Soundtrack",
    tracklist: [
      {
        "name": "Somewhere Over the Rainbow",
        "url": "https://audio.jukehost.co.uk/2eqLx8T1r213zm3v7C8hDgCZmJZmWKoE"
      },
      {
        "name": "55 Days at Peking",
        "url": "https://audio.jukehost.co.uk/LvWnbvWsXUwacbWVPaBtCgZntPdsIJrN"
      },
      {
        "name": "Stars and Stripes Forever",
        "url": "https://audio.jukehost.co.uk/DlycDZS3OMR8odMW622c4POu4hu4KEfy"
      },
    ]
  },        
}

// Set up new music player

newMusicPlayer()

RecReading=true

//#endcode



